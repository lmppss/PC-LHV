# -*- coding: utf-8 -*-
"""Untitled0.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1ZkgJpsrPLf54vXV3wMqcJXu2RLl27OGj
"""

import streamlit as st

from google.colab import files
uploaded = files.upload()  # Esto abrir√° un cuadro de di√°logo para seleccionar tu archivo

import joblib

# Cargar el modelo desde el archivo subido
ruta_modelo = "PC_0.8722_12.04.pkl"  # Usar el nombre del archivo subido
modelo_cargado = joblib.load(ruta_modelo)

print("‚úÖ Modelo cargado correctamente.")

import numpy as np
import ipywidgets as widgets
from IPython.display import display

# Crear widgets de entrada para cada variable
cenizas_bs = widgets.FloatText(description="Cenizas (BS) (%)")
sio2_ash = widgets.FloatText(description="SiO2 ash (%)")
al2o3_ash = widgets.FloatText(description="Al2O3 ash (%)")
fe2o3_ash = widgets.FloatText(description="Fe2O3 ash (%)")
cao_ash = widgets.FloatText(description="CaO ash (%)")
mgo_ash = widgets.FloatText(description="MgO ash (%)")
so3_ash = widgets.FloatText(description="SO3 ash (%)")
na2o_ash = widgets.FloatText(description="Na2O ash (%)")
k2o_ash = widgets.FloatText(description="K2O ash (%)")
s_carbon = widgets.FloatText(description="S carb√≥n (%)")
cl_carbon = widgets.FloatText(description="Cl carb√≥n (%)")

# Mostrar los widgets
display(cenizas_bs, sio2_ash, al2o3_ash, fe2o3_ash, cao_ash, mgo_ash, so3_ash, na2o_ash, k2o_ash, s_carbon, cl_carbon)

# Crear el bot√≥n de predicci√≥n
boton = widgets.Button(description="Predecir Poder Calor√≠fico")

def hacer_prediccion(b):
    # Recoger los valores de los widgets
    valores_manual = np.array([[cenizas_bs.value, sio2_ash.value, al2o3_ash.value, fe2o3_ash.value, cao_ash.value,
                                mgo_ash.value, so3_ash.value, na2o_ash.value, k2o_ash.value, s_carbon.value, cl_carbon.value]])

    # Hacer la predicci√≥n
    pc_predicho = modelo_cargado.predict(valores_manual)[0]

    # Mostrar el resultado
    print(f"üîπ Predicci√≥n del Poder Calor√≠fico (PC): {pc_predicho:.2f} kcal/kg")

# Asignar la funci√≥n al bot√≥n
boton.on_click(hacer_prediccion)

# Mostrar el bot√≥n
display(boton)